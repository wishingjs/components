var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/index.ts
var src_exports = {};
__export(src_exports, {
  default: () => src_default
});
module.exports = __toCommonJS(src_exports);
var import_utils = require("@umijs/utils");
var import_path = require("path");
var import_autoCSSModules = __toESM(require("./plugins/autoCSSModules"));
var import_dynamicImportNode = __toESM(require("./plugins/dynamicImportNode"));
var import_lockCoreJS = __toESM(require("./plugins/lockCoreJS"));
var import_stripExports = __toESM(require("./plugins/stripExports"));
var src_default = (_context, opts) => {
  return {
    presets: [
      [
        require.resolve("@umijs/bundler-utils/compiled/babel/preset-env"),
        {
          bugfixes: true,
          spec: false,
          loose: false,
          modules: false,
          debug: false,
          useBuiltIns: "entry",
          corejs: (0, import_utils.getCorejsVersion)((0, import_path.join)(__dirname, "../package.json")),
          forceAllTransforms: false,
          ignoreBrowserslistConfig: true,
          ...opts.presetEnv
        }
      ],
      [
        require.resolve("@umijs/bundler-utils/compiled/babel/preset-react"),
        {
          runtime: "automatic",
          development: process.env.NODE_ENV === "development",
          ...opts.presetReact
        }
      ],
      [
        require.resolve("@umijs/bundler-utils/compiled/babel/preset-typescript"),
        {
          allowNamespaces: true,
          allowDeclareFields: true,
          onlyRemoveTypeImports: false,
          optimizeConstEnums: true,
          ...opts.presetTypeScript
        }
      ]
    ],
    plugins: [
      opts.pluginStyledComponents && [
        require.resolve("babel-plugin-styled-components"),
        {
          ...opts.pluginStyledComponents
        }
      ],
      [
        require.resolve("@umijs/bundler-utils/compiled/babel/plugin-proposal-decorators"),
        { legacy: true }
      ],
      opts.classPropertiesLoose && [
        require.resolve("@umijs/bundler-utils/compiled/babel/plugin-proposal-class-properties"),
        { loose: true }
      ],
      opts.classPropertiesLoose && [
        require.resolve("@umijs/bundler-utils/compiled/babel/plugin-proposal-private-methods"),
        {
          loose: true
        }
      ],
      opts.classPropertiesLoose && [
        require.resolve("@umijs/bundler-utils/compiled/babel/plugin-proposal-private-property-in-object"),
        {
          loose: true
        }
      ],
      [
        require.resolve("@umijs/bundler-utils/compiled/babel/plugin-proposal-do-expressions")
      ],
      [
        require.resolve("@umijs/bundler-utils/compiled/babel/plugin-proposal-export-default-from")
      ],
      [
        require.resolve("@umijs/bundler-utils/compiled/babel/plugin-proposal-export-namespace-from")
      ],
      [
        require.resolve("@umijs/bundler-utils/compiled/babel/plugin-proposal-function-bind")
      ],
      [
        require.resolve("@umijs/bundler-utils/compiled/babel/plugin-proposal-partial-application")
      ],
      [
        require.resolve("@umijs/bundler-utils/compiled/babel/plugin-proposal-pipeline-operator"),
        { proposal: "minimal" }
      ],
      [
        require.resolve("@umijs/bundler-utils/compiled/babel/plugin-proposal-record-and-tuple"),
        {
          syntaxType: "hash",
          importPolyfill: true,
          polyfillModuleName: (0, import_path.dirname)(
            require.resolve("@bloomberg/record-tuple-polyfill/package")
          )
        }
      ],
      opts.pluginTransformRuntime && [
        require.resolve("@umijs/bundler-utils/compiled/babel/plugin-transform-runtime"),
        {
          helpers: true,
          regenerator: true,
          useESModules: false,
          absoluteRuntime: (0, import_path.dirname)(require.resolve("../package.json")),
          version: `^${require("@babel/runtime/package.json").version}`,
          ...opts.pluginTransformRuntime
        }
      ],
      opts.pluginLockCoreJS && [import_lockCoreJS.default],
      opts.pluginDynamicImportNode && [import_dynamicImportNode.default],
      opts.pluginAutoCSSModules && [import_autoCSSModules.default],
      opts.stripExports && [import_stripExports.default]
    ].filter(Boolean)
  };
};
// Annotate the CommonJS export names for ESM import in node:
0 && (module.exports = {});
